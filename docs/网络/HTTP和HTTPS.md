---
sidebar_position: 4
---
**HTTP**：不加密，数据以明文形式传输，不需要 SSL/TLS 证书，默认端口 80。实现更简单，速度稍快。目前，随着安全需求的提升，HTTP 协议逐渐被 HTTPS 替代。

**HTTPS**：加密，数据通过 SSL/TLS 协议加密传输，默认端口 443。HTTPS 需要服务器提供 SSL/TLS 证书，确保数据的安全性和完整性。

### 加密的工作原理

**1.客户端发送请求**：客户端发起 HTTPS 请求，发送支持的加密算法列表、客户端的随机数和 TLS 版本信息（ClientHello）。

**2.服务器响应**：服务器从客户端支持的加密算法中选择一种，发送服务器**证书**和公钥和服务器随机数（ServerHello）。

**3.客户端验证证书**：加密阶段是**非对称加密**。 客户端验证服务器证书的可信性（通过证书颁发机构 CA 验证），如果证书可信，客户端生成一个新的随机数（预主密钥），并使用服务器**公钥加密**该随机数，发送给服务器。

**4.生成会话密钥**：服务器使用**私钥解密**预主密钥，客户端和服务器基于三个随机数（客户端随机数、服务器随机数、预主密钥）生成会话密钥，接下来用此对称密钥加密通信内容。

**5.数据加密传输**：传输阶段是**对称加密**。客户端和服务器使用会话密钥对后续的数据进行加密传输，确保数据的机密性和完整性。



### 常用的加密算法

**1.非对称加密**（如 RSA 和 ECC）主要用于加密小数据量，如密钥交换和数字签名，因为其加解密速度较慢。

**场景：用于密钥交换和身份验证**

在 HTTPS 握手阶段，非对称加密用于**密钥交换**和**身份验证**。因为非对称加密算法可以使用**公钥加密**和**私钥解密**，主要应用于传递对称加密的密钥，并确保通信双方身份的真实性。

具体：

- **密钥交换**：客户端生成一个预主密钥，使用服务器的公钥加密，并发送给服务器。服务器使用自己的私钥解密出这个预主密钥。这一步是为了协商出后续用于加密实际数据的对称密钥。
- **身份验证**：服务器发送包含其公钥的数字证书，客户端使用证书颁发机构的公钥来验证该证书的真实性。这可以确保服务器是合法的，而非中间人。

由于非对称加密算法的计算复杂度高，通常只用于**握手阶段**，**不用于实际的加密数据传输**。



**2.对称加密**（如 AES）通常用于**大数据量**的加密，因为其效率更高。

**场景：用于数据传输**

对称加密算法用于加密 HTTPS 连接中的实际数据。客户端和服务器通过握手阶段协商出的对称密钥，用来加密和解密数据。这种算法加解密速度快，适合大规模的数据传输。

具体场景：

- **数据加密**：在握手阶段完成之后，客户端和服务器都会生成相同的会话密钥（对称密钥）。这个会话密钥将用于对传输的数据进行加密和解密。这包括页面内容、用户输入的敏感信息（如登录凭据）、图片等。

对称加密的特点是效率高，所以适用于整个 HTTPS 会话期间的加密数据传输。



**3.哈希算法**（如 SHA-256）不用于加密，而是用于验证数据的完整性，如数字签名和校验

**场景：用于数据完整性校验(与加密的数据一起传输)**

哈希算法在 HTTPS 中用于确保数据在传输过程中未被篡改。它主要用于生成**消息摘要**，然后与加密的数据一起传输。客户端和服务器通过对收到的数据生成哈希值并进行比对，验证数据是否完整和一致。

- **消息完整性校验**：在 HTTPS 连接中，双方会使用哈希算法对加密数据生成哈希值（消息摘要），并将其与数据一起发送。接收方使用相同的哈希算法重新生成哈希值，并与发送方的哈希值进行对比。如果两个哈希值一致，说明数据在传输过程中没有被篡改或损坏。