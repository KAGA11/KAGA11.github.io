---
sidebar_position: 3.5
---
HTTP协议是浏览器与服务器之间通信的协议

**无状态**：HTTP 是无状态协议，这意味着每次请求都是**独立**的，服务器不会自动记住之前请求的任何信息。为了维持状态（如用户登录），通常使用 **Cookies**、**Sessions** 或 **Token** 来存储用户信息。虽然 HTTP 是无状态的，但在 HTTP/1.1 及更高版本中，可以通过持久连接复用 TCP 连接。

### HTTP 1.0

**主要特点**：

1. **无状态协议**：每个请求/响应对都是独立的，服务器不会保留前后请求的上下文。
2. **每个请求一个连接**：客户端和服务器之间的每次请求和响应需要建立一个新的 TCP 连接。
3. **基本功能**：提供基本的 GET、POST 和 HEAD 方法。

**缺点**：

- 连接开销大：每次请求都需要建立和关闭连接，效率低下。
- 缺乏持久连接：无法在同一连接中发送多个请求，导致高延迟。

### HTTP 1.1

**主要改进**：

1. **持久连接**：默认启用了持久连接（Connection: keep-alive），允许在一个 TCP 连接中发送多个请求和响应。
2. **管道化**：HTTP/1.1 支持管道化，即在接收前一个响应之前发送多个请求以减少延迟，但由于存在队头阻塞问题，管道化在实际应用中并不常见，现代浏览器通常默认关闭了这一功能。
3. **额外的缓存控制**：引入了更多的缓存控制头，例如 ETag 和 If-Modified-Since。
4. **带宽优化**：引入了分块传输编码（Chunked Transfer Encoding），允许服务器在不提前知道响应内容长度的情况下发送数据。
5. **更多方法**：增加了 PUT、DELETE、OPTIONS 等方法。
6. **虚拟主机支持**：通过 Host 头字段支持同一 IP 地址上的多个域名。

**缺点**：

- 虽然引入了持久连接和管道化，但由于**队头阻塞**，性能提升有限。

### HTTP 2.0

**发布年份**：2015（RFC 7540）

**主要改进**：

1. **二进制协议**：将文本协议改为二进制协议，提高了解析效率和灵活性。
2. **多路复用**：在一个 TCP 连接中可以同时发送多个请求和响应，避免了队头阻塞问题。
3. **头部压缩**：使用 HPACK 算法对头部进行压缩，减少了带宽消耗。
4. **服务器推送**：服务器可以主动向客户端推送资源，减少延迟。
5. **流优先级**：允许客户端指定流的优先级，以优化资源加载顺序。

**缺点**：

- 虽然 HTTP/2 通过多路复用解决了 HTTP/1.1 的队头阻塞问题，但它仍依赖于单个 TCP 连接，因此在网络丢包的情况下，整个连接的传输效率会受到影响，导致新的“TCP 层队头阻塞”问题。

### HTTP 3.0

**发布年份**：2022

**主要改进**：

1. **移除队头阻塞**：HTTP/3 基于 UDP 的 QUIC 协议，彻底消除了 TCP 层队头阻塞问题。它使用 0-RTT 和 1-RTT 握手机制，大大缩短了连接建立时间，并且默认启用加密，提高了安全性和效率。

**优点**：

- 在高延迟和高丢包率的网络环境下性能显著提升。
- 更快的连接建立和数据传输。

### 总结

- **HTTP 1.0**：每个请求一个连接，无持久连接，效率低。
- **HTTP 1.1**：引入持久连接和管道化，多请求一个连接，性能有所提升。
- **HTTP 2.0**：二进制协议、多路复用、头部压缩和服务器推送，显著提升性能。
- **HTTP 3.0**：基于 QUIC，移除队头阻塞，更快的连接建立和传输，增强的安全性。